(function(g){var d=function(h){return typeof h==="undefined"};var f=function(h){return h===null};var e=function(h){return !d(h)&&!f(h)};var b=function(h){return d(h)||f(h)||h===""};var a=function(l,m,k){var h=l.data("options");var j=l.children("div.combo-text");var i;g.each(h.options,function(n,o){if(k===o.value){i=o;return false}});if(d(i)){g.each(h.options,function(n,o){if(d(i)){i=o}if(m===o.text){i=o}})}if(e(i)){j.removeClass("selected-disabled-option").attr("title",i.text).text(i.text).data("text",i.text);if(i.disabled===true){j.addClass("selected-disabled-option")}l.data("selected-option",i);if(e(h.select)){h.select.call(l,i)}}};var c={init:function(h){return this.each(function(){if(e(h)&&e(h.options)){var j=g(this);j.empty().unbind().data("options",h);g('<div class="combo-text"></div>').appendTo(j);j.addClass("combo-button-normal pointer combo").hover(function(){j.removeClass("button-normal").addClass("combo-button-over")},function(){j.removeClass("button-over").addClass("combo-button-normal")}).click(function(l){var q=j.data("options");g(this).addClass("combo-open");var n=j.offset();var m=g("<div></div>").addClass("combo-options").css({position:"absolute",left:n.left+"px",top:(n.top+Math.round(j.outerHeight())-1)+"px",width:(Math.round(j.outerWidth())-2)+"px","overflow-y":"auto"});var o=0;var s=-1;if(e(q.maxHeight)){s=parseInt(q.maxHeight);if(s>0){m.css("max-height",s+"px")}}else{var k=g(window).height();s=k-(n.top+Math.round(j.outerHeight()))-32;m.css("max-height",s+"px")}var p=g("<ul></ul>").appendTo(m);g.each(q.options,function(u,v){var x=g('<span class="combo-option-text"></span>').attr("title",v.text).text(v.text);var w=g('<span class="hidden"></span>').text(v.value);var t=g("<li></li>").addClass(v.optionClass).append(x).append(w).appendTo(p);if(v.disabled===true){t.addClass("unset disabled-option")}else{t.click(function(){g(".combo").removeClass("combo-open");a(j,v.text,v.value);g(".combo-glass-pane").click()}).hover(function(){g(this).addClass("pointer").css("background","#eaeef0")},function(){g(this).removeClass("pointer").css("background","#ffffff")})}if(!b(v.description)){g('<div style="float: right; line-height: 32px;" class="fa fa-question-circle"></div>').appendTo(t).qtip({content:v.description,position:{at:"top center",my:"bottom center",adjust:{y:5}},style:{classes:"nifi-tooltip"},show:{solo:true,effect:function(y){g(this).slideDown(100)}},hide:{effect:function(y){g(this).slideUp(100)}}})}else{x.css("width","100%")}o+=16});var r=g('<div class="combo-glass-pane"></div>').one("click",function(){if(m.length!==0){m.find(".fa").each(function(){var u=g(this);if(u.data("qtip")){var t=u.qtip("api");t.destroy(true)}});m.remove();g(".combo").removeClass("combo-open")}g(this).remove()});g("body").append(m).append(r);l.stopPropagation()});g('<div class="combo-arrow fa fa-chevron-down"></div>').appendTo(j);var i=null;if(h.options.length>0){i=h.options[0]}if(e(h.selectedOption)){a(j,h.selectedOption.text,h.selectedOption.value)}else{if(f(i)){a(j)}else{a(j,i.text,i.value)}}}})},getSelectedOption:function(){var h;this.each(function(){h=g(this).data("selected-option");return false});return h},setSelectedOption:function(h){return this.each(function(){a(g(this),h.text,h.value)})},setOptionEnabled:function(i,h){return this.each(function(){var k=g(this);var j=k.data("options");g.each(j.options,function(l,m){if(m.value===i.value){m.disabled=!h}})})},destroy:function(){return this.each(function(){g(this).empty().unbind().removeData();g("div.combo-glass-pane").click()})},close:function(){g("div.combo-glass-pane").click()}};g.fn.combo=function(h){if(c[h]){return c[h].apply(this,Array.prototype.slice.call(arguments,1))}else{return c.init.apply(this,arguments)}}})(jQuery);