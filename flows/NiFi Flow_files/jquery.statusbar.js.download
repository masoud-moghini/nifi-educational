(function(e){var j="component.id",i="status.aggregateSnapshot.activeThreadCount",f="status.aggregateSnapshot.runStatus",d="bulletins";var c=function(k){return typeof k==="undefined"};var a=function(k){return k===null};var g=function(k){return !c(k)&&!a(k)};var h=function(l,k){return k.split(".").reduce(function(n,m){return(typeof n===undefined||n===null)?n:(typeof n[m]=="function")?n[m]():n[m]},l)};var b={init:function(){var k=e(this).addClass("dialog-status-bar");k.html('<text class="run-status-icon"></text><span class="dialog-status-bar-state"></span><span class="dialog-status-bar-threads" count="0"></span><div class="dialog-status-bar-bulletins fa fa-sticky-note-o" count="0"><div class="dialog-status-bar-bulletins-content"></div></div><div class="dialog-status-bar-buttons"></div>');return k},show:function(){var k=e(this);if(k.is(":visible")){k.show()}return k},hide:function(){var k=e(this);if(k.is(":visible")){k.hide()}return k},observe:function(n,k){var m=e(this);var l=document.querySelector('g[id="id-'+n+'"]');m.statusbar("set",n);m.data("observer",new MutationObserver(function(o){m.statusbar("set",n);if(typeof k=="function"){k()}}));m.data("observer").observe(l,{attributes:true,childList:true,subtree:true});return m.data("observer")},disconnect:function(){var k=e(this);if(g(k.data("observer"))){k.data("observer").disconnect();k.data("observer",null)}if(g(k.data("buttonModel"))){k.data("buttonModel",[]);k.statusbar("refreshButtons",[])}},refreshButtons:function(){var k=e(this);k.statusbar("buttons",k.data("buttonModel"));return k},hideButtons:function(){var k=e(this);k.find(".dialog-status-bar-buttons").hide();return k},showButtons:function(){var k=e(this);k.find(".dialog-status-bar-buttons").show(250);return k},buttons:function(m){var l=e(this),k=l.find(".dialog-status-bar-buttons");if(g(m)){k.children().remove();e.each(m,function(q,o){var n=function(){return typeof o.disabled==="function"&&o.disabled.call()===true};var p=e('<div class="button"></div>');if(o.buttonText){p.append(e("<span></span>").text(o.buttonText))}else{if(o.buttonHtml){p.html(o.buttonHtml)}}if(g(o.clazz)){p.addClass(o.clazz)}if(g(o.color)){p.css({background:o.color.base,color:o.color.text})}if(n()){p.addClass("disabled-button")}else{if(g(o.color)){p.hover(function(){e(this).css("background-color",o.color.hover)},function(){e(this).css("background-color",o.color.base)})}p.click(function(){var r=e(this).data("handler");if(g(r)&&typeof r.click==="function"){r.click.call(l)}})}p.data("handler",o.handler).appendTo(k)});l.data("buttonModel",m)}m=[];e.each(k.find(".button"),function(o,n){m.push(e(n))});return m},set:function(r){var n=e(this),q=d3.select("#id-"+r).datum(),p=e("<ul></ul>"),k=h(q,f),m=h(q,i),o=h(q,d);if(g(k)&&g(m)&&g(o)&&Array.isArray(o)){n.attr("state",k.toUpperCase());n.find(".dialog-status-bar-state").text(k);n.find(".dialog-status-bar-threads").attr("count",m);n.find(".dialog-status-bar-threads").attr("title",m+" active threads");n.find(".dialog-status-bar-threads").text("("+m+")");e.each(o,function(s,t){if(t.canRead){p.append(e("<li>"+t.bulletin.timestamp+" "+t.bulletin.level+"<br/>"+t.bulletin.message+"<br>&nbsp;</li>"))}});var l=p.find("li").length;n.find(".dialog-status-bar-bulletins-content").html((l>0)?p:"");n.find(".dialog-status-bar-bulletins").attr("count",l);n.statusbar("refreshButtons")}return n}};e.fn.statusbar=function(k){if(b[k]){return b[k].apply(this,Array.prototype.slice.call(arguments,1))}else{return b.init.apply(this,arguments)}}})(jQuery);