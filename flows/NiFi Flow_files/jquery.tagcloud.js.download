(function(h){var d=function(i){return typeof i==="undefined"};var g=function(i){return i===null};var f=function(i){return !d(i)&&!g(i)};var a=function(i){return d(i)||g(i)||i===""};var e={maxTags:25,maxTagFontSize:2,minTagFontSize:1,minWidth:20};var c=function(k,i){var j=k.data("options");if(i.hasClass("selected")){i.removeClass("selected");if(f(j.remove)){j.remove.call(k,i)}}else{i.addClass("selected");if(f(j.select)){j.select.call(k,i)}}};var b={init:function(i){return this.each(function(){if(f(i)&&f(i.tags)){var l=h(this);l.empty().unbind().data("options",i);var k=h('<ul class="tag-cloud"></ul>').appendTo(l);var m={};var j=[];h.each(i.tags,function(q,o){var r=o.toLowerCase();if(f(m[r])){m[r].count=m[r].count+1}else{var p={term:r,count:1};j.push(p);m[r]=p}});if(j.length>0){j.sort(function(p,o){return o.count-p.count});if(j.length>e.maxTags){j=j.slice(0,e.maxTags)}var n=j[0].count;j.sort(function(p,o){var r=p.term.toUpperCase();var q=o.term.toUpperCase();return(r<q)?-1:(r>q)?1:0});h.each(j,function(p,o){var r=Math.log(o.count)/Math.log(n)*(e.maxTagFontSize-e.minTagFontSize)+e.minTagFontSize;var q=e.minWidth*r;h("<li></li>").append(h('<span class="link"></span>').text(o.term).css({"font-size":r+"em"})).css({"min-width":q+"px"}).click(function(){var s=h(this).children("span");c(l,s)}).appendTo(k).ellipsis()})}else{h('<li><span class="unset">No tags specified</span></li>').appendTo(k)}}})},clearSelectedTags:function(){return this.each(function(){var i=h(this);i.find("div.remove-selected-tag").trigger("click")})},getSelectedTags:function(){var i=[];this.each(function(){var j=h(this);j.find("span.link.selected").each(function(){i.push(h(this).text())})});return i}};h.fn.tagcloud=function(i){if(b[i]){return b[i].apply(this,Array.prototype.slice.call(arguments,1))}else{return b.init.apply(this,arguments)}}})(jQuery);